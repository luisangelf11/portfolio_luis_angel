---
const navLinks = [
  { href: "#about", text: "About me" },
  { href: "#skills", text: "Skills" },
  { href: "#studies", text: "Education" },
  { href: "#experience", text: "Experience" },
  { href: "#projects", text: "Projects" },
  { href: "#contact", text: "Contact" },
];
---

<header class="fixed top-0 left-0 w-full z-30 transition-all duration-300">
  <nav class="max-w-5xl mx-auto px-4 py-3">
    <div class="flex justify-end md:justify-center items-center">
      <!-- Desktop Menu -->
      <ul
        class="hidden md:flex items-center gap-2 bg-slate-900/70 backdrop-blur-sm rounded-full p-2"
      >
        {
          navLinks.map((link) => (
            <li>
              <a
                href={link.href}
                class="nav-link text-white/80 hover:text-yellow-300 font-medium px-4 py-2 rounded-full transition-colors"
              >
                {link.text}
              </a>
            </li>
          ))
        }
      </ul>

      <!-- Mobile Menu Button -->
      <div class="md:hidden">
        <button
          id="menu-btn"
          class="z-40 p-2 bg-slate-900/70 backdrop-blur-sm rounded-md text-white"
        >
          <svg
            id="menu-icon-open"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-6"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
          </svg>
          <svg
            id="menu-icon-close"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="size-6 hidden"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6 18 18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div
    id="mobile-menu"
    class="hidden md:hidden fixed inset-0 bg-slate-900/95 backdrop-blur-xl z-30"
  >
    <ul class="flex flex-col items-center justify-center h-full gap-6">
      {
        navLinks.map((link) => (
          <li>
            <a
              href={link.href}
              class="nav-link text-2xl text-white/80 hover:text-yellow-300 font-semibold transition-colors"
            >
              {link.text}
            </a>
          </li>
        ))
      }
    </ul>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const menuBtn = document.getElementById("menu-btn");
    const mobileMenu = document.getElementById("mobile-menu");
    const menuIconOpen = document.getElementById("menu-icon-open");
    const menuIconClose = document.getElementById("menu-icon-close");
    const navLinks = document.querySelectorAll(".nav-link");

    const toggleMenu = () => {
      const isOpen = mobileMenu?.classList.toggle("hidden");
      menuIconOpen?.classList.toggle("hidden", !isOpen);
      menuIconClose?.classList.toggle("hidden", isOpen);
      document.body.style.overflow = isOpen ? "auto" : "hidden";
    };

    menuBtn?.addEventListener("click", toggleMenu);

    // Close menu when a link is clicked
    navLinks.forEach((link) => {
      link.addEventListener("click", () => {
        if (!mobileMenu?.classList.contains("hidden")) {
          toggleMenu();
        }
      });
    });

    // Active link highlighting on scroll
    const sections = document.querySelectorAll("section[id], article[id]");
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const id = entry.target.getAttribute("id");
            navLinks.forEach((link) => {
              link.classList.toggle(
                "active",
                link.getAttribute("href") === `#${id}`
              );
            });
          }
        });
      },
      { rootMargin: "-50% 0px -50% 0px" } // Trigger when section is in the middle of the viewport
    );

    sections.forEach((section) => {
      observer.observe(section);
    });
  });
</script>

<style>
  .nav-link.active {
    @apply text-yellow-300 font-bold;
  }
</style>
</nav>
